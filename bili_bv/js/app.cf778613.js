(function(t){function e(e){for(var s,o,c=e[0],a=e[1],l=e[2],d=0,h=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,c=1;c<n.length;c++){var a=n[c];0!==i[a]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},i={app:0},r=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=a;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0d85":function(t,e,n){"use strict";n("e212")},"40cd":function(t,e,n){"use strict";n("9404")},"56d7":function(t,e,n){"use strict";n.r(e);var s=n("2b0e"),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},r=[],o=(n("40cd"),n("2877")),c={},a=Object(o["a"])(c,i,r,!1,null,null,null),l=a.exports,u=n("8c4f"),d=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"home"}},[e("div",{staticClass:"nav"},[e("button",{attrs:{disabled:t.bvIndex<=0},on:{click:function(e){t.bvIndex--}}},[t._v("上一个")]),e("button",{attrs:{disabled:!t.enableStart},on:{click:function(e){t.enableStart=!1}}},[t._v("开始")]),e("button",{attrs:{disabled:t.enableStart},on:{click:function(e){t.enableStart=!0}}},[t._v("暂停")]),e("button",{attrs:{disabled:0===t.bvList.length},on:{click:t.clear}},[t._v("清空")]),e("button",{attrs:{disabled:t.bvIndex<0},on:{click:function(e){return t.del(t.bvIndex)}}},[t._v("删除")]),e("button",{attrs:{disabled:t.bvIndex==t.bvList.length-1||t.bvIndex<0},on:{click:function(e){t.bvIndex++}}},[t._v("下一个")])]),e("hr"),-1==t.bvIndex?e("div",[t._v("准备就绪")]):t._e(),-1!=t.bvIndex?e("iframe",{attrs:{src:t.getUrl(t.bvIndex),width:"800",height:"600",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true"}}):t._e(),e("ul",[e("li",{staticStyle:{"text-align":"left",position:"fixed","background-color":"white",width:"200px"}},[e("b",{staticStyle:{color:"red"}},[t._v("总")]),e("b",{staticStyle:{color:"rgb(255, 0, 208)"}},[t._v("提")]),e("b",{staticStyle:{color:"blue"}},[t._v("舰")]),e("b",{staticStyle:{color:"brown"}},[t._v("粉")]),e("b",{staticStyle:{color:"black"}},[t._v("路")]),-1!=t.bvIndex?e("b",[t._v(" "+t._s(t.bvList[t.bvIndex][0]))]):t._e()]),e("li",[t._v(" ")]),t._l(t.users,(function(n,s){return e("li",{key:n.msg_id,style:{"background-color":t.bvIndex===s?"#cfc":"",color:t.identity(n.guard_level,n.fans_medal_wearing_status)},on:{click:function(e){t.bvIndex=s}}},[void 0===n.rmb?e("div",[e("span",{staticClass:"iconfont icon-icon",on:{click:function(e){return t.del(s)}}}),e("img",{attrs:{src:n.uface,width:"16"}}),e("b",[t._v(t._s(n.uname))]),e("br"),e("div",{staticClass:"msg"},[t._v(t._s(n.msg))])]):e("div",{staticStyle:{margin:"4px 0"}},[e("div",{staticStyle:{"background-color":"red"}},[e("span",{staticClass:"iconfont icon-icon",on:{click:function(e){return t.del(s)}}}),e("img",{attrs:{src:n.uface,width:"16"}}),e("b",[t._v(t._s(n.uname))])]),e("div",{staticStyle:{"background-color":"pink"}},[e("p",{staticClass:"msg",staticStyle:{margin:"0"}},[e("b",{staticStyle:{color:"red"}},[t._v("[ RMB : "+t._s(n.rmb)+" ]")]),e("br"),e("span",[t._v(t._s(n.message))])])])])])}))],2)])},h=[];function b(t,e){const n=new ArrayBuffer(1500),s=new DataView(n,0);let i=4;s.setInt16(i,16),i+=2,s.setInt16(i,1),i+=2,s.setInt32(i,t),i+=4,s.setInt32(i,0),i+=4;const r=f(e);for(let o=0;o<r.length;o++,i++)s.setInt8(i,r[o]);return s.setInt32(0,i),n.slice(0,i)}function f(t){const e=encodeURIComponent(t),n=[];for(let s=0;s<e.length;s++){const t=e.charAt(s);if("%"===t){const t=e.charAt(s+1)+e.charAt(s+2),i=parseInt(t,16);n.push(i),s+=2}else n.push(t.charCodeAt(0))}return n}function p(t){const e={packLen:0,headerLen:0,version:0,op:0,seq:0,body:""},n=new FileReader;return n.readAsArrayBuffer(t.data),new Promise((t,s)=>{n.onload=()=>{const s=n.result,i=new DataView(s,0);let r=0;e.packLen=i.getInt32(r),r+=4,e.headerLen=i.getInt16(r),r+=2,e.version=i.getInt16(r),r+=2,e.op=i.getInt32(r),r+=4,e.seq=i.getInt32(r);const o=new FileReader;o.readAsText(new Blob([s.slice(e.headerLen)])),o.onload=()=>{e.body=o.result,t(e)}}})}n("7003");var m={data(){return{bvIndex:-1,enableStart:!0,bvList:[],socket:null,wssLink:"",authBody:"",success:!1,users:[]}},mounted(){this.init()},methods:{getUrl:function(t){return"//player.bilibili.com/player.html?bvid="+this.bvList[t]},init:function(){"undefined"===typeof WebSocket?alert("当前浏览器不支持websocket!"):(this.authBody=window.sessionStorage.getItem("authBody"),this.wssLink=window.sessionStorage.getItem("wssLink"),null!=this.authBody&&null!=this.wssLink?this.wssInit():(alert("登录失效！请登录！"),location.href="/login"))},wssInit:function(){this.socket=new WebSocket(this.wssLink),this.socket.onopen=this.wssOpen,this.socket.onmessage=this.wssMsg,this.socket.onclose=this.wssClose},wssOpen:function(){this.socket.send(b(7,this.authBody));const t=setInterval(()=>{this.success?this.socket.send(b(2,"")):clearInterval(t)},3e4)},wssMsg:async function(t){const e=await p(t);5===e.op?this.handleMsg(JSON.parse(e.body)):8===e.op&&0===JSON.parse(e.body).code&&(this.success=!0)},wssClose:function(){this.success=!1},identity:function(t,e){return 1===t?"red":2===t?"rgb(255, 0, 208)":3===t?"blue":e?"brown":void 0},clear(){this.bvList=[],this.bvIndex=-1,this.users=[]},del(t){this.bvList.splice(t,1),this.users.splice(t,1),(t<this.bvIndex||this.bvIndex===this.bvList.length)&&this.bvIndex--},handleMsg:function(t){const e=t.data;switch(t.cmd){case"LIVE_OPEN_PLATFORM_DM":this.DM(e);break;case"LIVE_OPEN_PLATFORM_SEND_GIFT":break;case"LIVE_OPEN_PLATFORM_SUPER_CHAT":this.SC(e);break;case"LIVE_OPEN_PLATFORM_SUPER_CHAT_DEL":break;case"LIVE_OPEN_PLATFORM_GUARD":break;default:console.log(t.cmd)}},DM(t){const e=t.msg.match(/BV[\w]{10}/g);null===e||this.enableStart||(this.bvList.push(e),-1===this.bvIndex&&this.bvIndex++,this.users.push(t))},SC(t){const e=t.message.match(/BV[\w]{10}/g);null===e||this.enableStart||(this.bvList.push(e),-1===this.bvIndex&&this.bvIndex++,this.users.push(t))}}},v=m,g=(n("0d85"),Object(o["a"])(v,d,h,!1,null,null,null)),_=g.exports,w=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"panel"}},[e("h1",[t._v("认证身份后可开启玩法")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.sfm,expression:"sfm"}],attrs:{id:"sfm",type:"text",placeholder:"请输入身份码",maxlength:"16",autofocus:""},domProps:{value:t.sfm},on:{input:function(e){e.target.composing||(t.sfm=e.target.value)}}}),t._m(0),e("img",{staticClass:"btv",attrs:{src:"/imgs/Fill3.webp"}}),e("b",{on:{click:function(e){return t.clearInput()}}},[t._v("×")]),e("button",{on:{click:function(e){return t.startGame()}}},[e("span",[t._v("开启玩法")])]),e("p",[e("img",{attrs:{id:"rem",src:t.remPic,width:"15",height:"15"},on:{click:function(e){return t.changeRemember()}}}),e("span",{staticStyle:{cursor:"default"},on:{click:function(e){return t.changeRemember()}}},[t._v("记住身份码")])]),e("img",{staticClass:"exit",attrs:{src:"/imgs/exit.webp"},on:{click:function(e){return t.exitApp()}}})])},y=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"cid"},[e("img",{attrs:{src:"imgs/ques.webp"}}),e("p",[t._v("在获取推流地址处可获取身份码")]),e("span",[t._v("身份码")]),e("a",{attrs:{href:"https://link.bilibili.com/p/center/index?my-room/start-live#/my-room/start-live",target:"_blank"}},[t._v("去获取")])])}];const k={set:function(t,e,n){const s=new Date;s.setTime(s.getTime()+864e5*n),document.cookie=t+"="+e+";path=/;expires="+s.toGMTString()},get:function(t){if(document.cookie.length>0){var e=document.cookie.split(";");for(let n=0;n<e.length;n++){const s=e[n].split("=");if(s[0].trim()===t)return s[1]}}},remove:function(t){this.set(t,"",-1)}};var I=n("bc3a"),x=n.n(I);const S="//1.15.154.254:40076",L="1663041776740";var O={data(){return{sfm:"",remember:!1,remPic:"",picSrc:{eis:"/imgs/eis.webp",ens:"/imgs/ens.webp"},wssLink:"",authBody:""}},mounted(){this.changeRemember();const t=k.get("uid");void 0!==t&&(this.sfm=t)},methods:{clearInput(){this.sfm=""},changeRemember(){this.remember=!this.remember,this.remember?this.remPic=this.picSrc.eis:this.remPic=this.picSrc.ens},exitApp(){window.close()},startGame(){if(""===this.sfm.trim())alert("请填写身份码");else{const t={gameID:this.sfm,projID:L};x.a.post(S+"/conn/info_v2",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(t=>{if(-1===t.data.code)alert("身份码未授权或者错误！请重新填写！");else{const e=t.data.data;this.authBody=e.authBody,this.wssLink=e.wssLink[0],window.sessionStorage.setItem("authBody",this.authBody),window.sessionStorage.setItem("wssLink",this.wssLink),this.remember?k.set("uid",this.sfm,30):k.remove("uid"),this.$router.push("/home").catch()}}).catch(t=>{t.response.status.status>=500&&alert("远程签名验证服务器异常，请联系开发者报告问题")})}}}},P=O,A=(n("e10c"),Object(o["a"])(P,w,y,!1,null,null,null)),M=A.exports;s["a"].use(u["a"]);const C=[{path:"/home",name:"Home",component:_},{path:"/login",name:"Login",component:M},{path:"/",redirect:"/login"}],B=new u["a"]({mode:"hash",base:"/",routes:C});var R=B,T=n("2f62");s["a"].use(T["a"]);var j=new T["a"].Store({state:{},mutations:{},actions:{},modules:{}});s["a"].config.productionTip=!1,new s["a"]({router:R,store:j,render:t=>t(l)}).$mount("#app")},7003:function(t,e,n){},9404:function(t,e,n){},e10c:function(t,e,n){"use strict";n("e85c")},e212:function(t,e,n){},e85c:function(t,e,n){}});